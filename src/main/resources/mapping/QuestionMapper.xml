<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qianma.community.mapper.QuestionMapper">

    <select id="getById" resultType="com.qianma.community.Model.Question">
        select * from t_cmt_question where id = #{id}
    </select>
    <insert id="insert"  parameterType="com.qianma.community.Model.Question">
        insert into t_cmt_question(
        fid,
        fgmt_create,
        fgmt_modified,
        fkcreatorid,
        ftitle,
        fdescription,
        ftags,
        fcomment_count,
        flike_count,
        fview_count)
        value (
        #{id},
        #{gmtCreate},
        #{gmtModified},
        #{creator.id},
        #{title},
        #{desc},
        #{tags},
        #{commentCount},
        #{likeCount},
        #{viewCount}
        )
    </insert>
    <select id="selectForIndex" resultType="com.qianma.community.dto.QueUsrDTO">
    select
        tcq.fid id,
        tcq.fgmt_create gmtCearte,
        tcq.fgmt_modified gmtModified,
        tcq.fkcreatorid "creator.id",
        tcq.fdescription "desc",
        tcq.ftitle title,
        tcq.ftags tags,
        tcq.fview_count viewCount,
        tcq.flike_count likeCount,
        tcq.fcomment_count commentCount,
        tcu.favatar_url avatarUrl
     from t_cmt_question tcq
     join t_cmt_user tcu on tcq.fkcreatorid = tcu.fid
     order by tcq.fgmt_create desc
    </select>
</mapper>